# Below code is intended to verify the R installation within the CI/CD environment.
# stages:
#   - test
#
# test_R:
#   stage: test
#   image: rocker/tidyverse:4.4
#   script:
#     - echo "Testing R installation"
#     - R --version
#   only:
#     - main
#     - merge_requests
stages:
  - test

test_R:
  stage: test
  image: rocker/tidyverse:4.4
  script:
    - echo "Testing R CMD Check"
    - R --version
    # run the R CMD check on the package (this path)
    - R CMD check ./ --no-manual
    # run the devtools test
    - R -e 'devtools::test()'
    # install the package
    - R -e 'devtools::install()'
  only:
    - main
    - merge_requests


