# Below the simplest CI/CD pipeline to check if I can connect with the runners
# stages:
#   - test
#
# test_job:
#   stage: test
#   image: alpine:latest
#   script:
#     - echo "CI/CD Pipeline is working!"
#   only:
#     - main
#     - master
#     - merge_requests

# Below code is intended to verify the R installation within the CI/CD environment.
# stages:
#   - test
#
# test_R:
#   stage: test
#   image: rocker/r-ver:4.4.2
#   script:
#     - echo "Testing R installation"
#     - R --version
#   only:
#     - main
#     - merge_requests



stages:
  - test

# Default settings for all jobs
default:
  before_script:
    # Update system packages and install dependencies
    - apt-get update -qq && apt-get install -y -qq libcurl4-openssl-dev libssl-dev libxml2-dev
    # Install necessary R packages for checking
    - Rscript -e 'install.packages(c("devtools", "roxygen2"), repos = "https://cloud.r-project.org")'

check_R_4_4_2:
  stage: test
  image: rocker/r-ver:4.4.2
  script:
    - echo "Running R CMD check on R 4.4.2"
    - R CMD build .
    - "R CMD check *tar.gz --no-manual --as-cran"
  artifacts:
    paths:
      - "*.Rcheck/"
  only:
    - main
    - merge_requests





