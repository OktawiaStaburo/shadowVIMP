---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# shadowVIMP

<!-- badges: start -->
<!-- badges: end -->

<!-- keep`README.md` up-to-date -> use`devtools::build_readme()`-->

## Overview

The goal of shadowVIMP is to provide a tool that allows the selection of informative covariates in an informed manner. The method implemented in this package is based on testing the variable importance measures (VIMP) obtained from the random forest (RF). It also allows the user to conveniently visualise the variables considered as informative on the box plot. It is a convenient alternative to the standard approach, e.g. selecting the top n variables, selecting only those variables with an importance score above the predefined threshold. Details of the method, realistic example of usage and interpretation of the results can be found in `vignette("shadowVIMP-vignette")`.

## Installation

The `shadowVIMP` package is not (yet!) available on Cran, but you can install the development version. Installation instructions:

1. Create a personal access token (PAT) for yourself. To do this:
   - Login to your GitLab account.
   - Click on your profile photo in the top right corner and select "Edit Profile".
   - Select "Access Tokens" from the menu on the left.
   - Choose a name and expiration date for your token, then save the token.
2. In RStudio, run the following code with your credentials:

``` {r, eval = FALSE}
devtools::install_git("https://gitlab.staburo.de/oktawia.miluch/shadowVIMP-package.git",
  credentials = git2r::cred_user_pass("YOUR-GITLAB-USERNAME", "YOUR-PAT-TOKEN")
)
```

Now, after calling `library(shadowVIMP)`, the package should be available to you. 

## Usage

Imagine you are working with a dataset with many variables and you want to select the subset of the most informative covariates. Instead of computing the variable importance, displaying it on variable importance plots, and (somewhat arbitrarily) selecting the set of informative features, you can use the method implemented in this package and select the subset of features in a more robust way. The following example shows the basic use case.

```{r example, message = FALSE, warning = FALSE}
library(shadowVIMP)
library(magrittr)

data(mtcars)

# For reproducibility
set.seed(789)

# Standard usage - sequential computing
# When working with real data, increase the value of the nsims parameter or leave it at the default value
vimp_seq <- vim_perm_sim_wrapper(entire_data = mtcars, outcome_var = "vs", nsims = c(30, 100, 150))

# Print informative covariates according to the pooled criterion (with and without p-value correction)
vimp_seq$final_dec_pooled

# The significance level used for the test in the last step
vimp_seq$alpha

# Check control parameters from the last step - you can specify what should be added to this list
vimp_seq$control_parameters

# Are the displayed results from the last or the previous step?
vimp_seq$result_taken_from_previous_step

# Check the time needed to execute each step of the algorithm and the entire procedure
vimp_seq$time_elapsed

# Check the call code that was used to create the inspected object
vimp_seq$call

# Check VIMP measures of covariates and their shadows from the last step
vimp_seq$vimp_history %>% head()

# Inspect in detail two steps of pre-selection
#  vimp_seq$pre_selection
```

You can visualize your results in the following way:

```{r example_cont, echo = FALSE, fig.width=28, fig.height=19}
plot_vimps(wrapper_object = vimp_seq, text_size = 4)
```

For a more realistic and detailed example of how to use this package, and the theory behind the method, see `vignette("shadowVIMP-vignette")`.

## Getting help

If you encounter a clear bug, please file an issue with a minimal reproducible example.

